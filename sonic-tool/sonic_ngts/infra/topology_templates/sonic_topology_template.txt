<?xml version="1.0" encoding="UTF-8"?>
<TOPOLOGY>

    <HOSTS name="TEST_SERVER">
        <HOST>
            <TYPE>Linux</TYPE>
            <BASE_IP>{{hypervisor.ip}}</BASE_IP>
	    <CONNECTIONS>
                <CONNECTION CONN_TYPE="SSH">
                    <CLI_TYPE>SHELL</CLI_TYPE>
		            <IP>{{hypervisor.ip}}</IP>
                </CONNECTION>
            </CONNECTIONS>
            <USERS>
                <USER>
                    <USERNAME>$TEST_SERVER_USER</USERNAME>
                    <PASSWORD>$TEST_SERVER_PASSWORD</PASSWORD>
                </USER>
            </USERS>
            <MAC_ADDRESS>{{hypervisor.mac}}</MAC_ADDRESS>
        </HOST>
    </HOSTS>

    <HOSTS name="SONIC_MGMT">
        <HOST>
            <TYPE>Linux</TYPE>
            <BASE_IP>{{sonic_mgmt.ip}}</BASE_IP>
	    <CONNECTIONS>
                <CONNECTION CONN_TYPE="SSH">
                    <CLI_TYPE>SHELL</CLI_TYPE>
                    <IP>{{sonic_mgmt.ip}}</IP>
                </CONNECTION>
            </CONNECTIONS>
            <USERS>
                <USER>
                    <USERNAME>$SONIC_MGMT_USER</USERNAME>
                    <PASSWORD>$SONIC_MGMT_PASSWORD</PASSWORD>
                </USER>
            </USERS>
            <MAC_ADDRESS>{{sonic_mgmt.mac}}</MAC_ADDRESS>
        </HOST>
    </HOSTS>

 {% for switch in switches -%}
    <HOSTS name="{{switch.alias|upper}}">
        <HOST>
            <TYPE>Linux</TYPE>
            <BASE_IP>{{switch.ip}}</BASE_IP>
            <CONNECTIONS>
                <CONNECTION CONN_TYPE="SSH">
                    <CLI_TYPE>SHELL</CLI_TYPE>
                    <IP>{{switch.ip}}</IP>
                </CONNECTION>
            </CONNECTIONS>
            <USERS>
                <USER>
                    <USERNAME>$SONIC_SWITCH_USER</USERNAME>
                    <PASSWORD>$SONIC_SWITCH_PASSWORD</PASSWORD>
                </USER>
            </USERS>
        </HOST>
    </HOSTS>
 {% endfor %}

 {% for host in hosts -%}
    <HOSTS name="{{host.alias|upper}}">
        <HOST>
            <TYPE>Linux</TYPE>
            <BASE_IP>{{host.ip}}</BASE_IP>
            <CONNECTIONS>
                <CONNECTION CONN_TYPE="SSH">
                    <CLI_TYPE>SHELL</CLI_TYPE>
                    <IP>{{host.ip}}</IP>
                </CONNECTION>
            </CONNECTIONS>
            <USERS>
                <USER>
                    <USERNAME>$VM_USER</USERNAME>
                    <PASSWORD>$VM_PASSWORD</PASSWORD>
                </USER>
            </USERS>
        </HOST>
    </HOSTS>
 {% endfor %}

</TOPOLOGY>
